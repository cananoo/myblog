# 实体类与数据库设计
> **作者：** Cananoo

---

## 1. 数据库设计 
> 环境：IDEA JDK17

> 工具: MyBatisX 


###  1.1 博客
  DROP TABLE IF EXISTS `t_blog`;
  
  CREATE TABLE blog.t_blog (  
	id BIGINT auto_increment NOT NULL COMMENT '主键',  
	title varchar(20) NOT NULL COMMENT '标题',  
	content LONGTEXT NOT NULL COMMENT '内容',  
	first_picture varchar(255) DEFAULT  NULL COMMENT '首图',  
	flag varchar(255) DEFAULT  NULL COMMENT '博客标记',  
	views INT DEFAULT NULL  COMMENT '浏览数',  
	appreciation BIT NOT NULL COMMENT '开启赞赏',  
	share_statement BIT NOT NULL COMMENT '开启转载声名',  
	commentabled BIT NOT NULL COMMENT '开启评论',  
	published BIT NOT NULL COMMENT '是否发布',  
	recommend BIT NOT NULL COMMENT '是否推荐',  
	create_time DATETIME DEFAULT NULL  COMMENT '创建时间',  
	update_time DATETIME DEFAULT NULL  COMMENT '更新时间',   
 type_id bigint DEFAULT NULL COMMENT '类型',  
  user_id bigint DEFAULT NULL COMMENT '作者',  
 CONSTRAINT blog_pk PRIMARY KEY (id),  
 CONSTRAINT `FK_type_id` FOREIGN KEY (`type_id`) REFERENCES `t_type` (`id`),  
  CONSTRAINT `FK_user_id` FOREIGN KEY (`user_id`) REFERENCES `t_user` (`id`)  
)  
ENGINE=InnoDB  
DEFAULT CHARSET=utf8mb4  
COLLATE=utf8mb4_0900_ai_ci;  

###  1.2 类型  

 DROP TABLE IF EXISTS `t_type`;  

 CREATE TABLE blog.t_type (  
	id BIGINT auto_increment NOT NULL,  
	name varchar(255) DEFAULT  NULL,  
	CONSTRAINT t_type_pk PRIMARY KEY (id)  
)  
ENGINE=InnoDB  
DEFAULT CHARSET=utf8mb4  
COLLATE=utf8mb4_0900_ai_ci;  

 ###  1.3 标签  

 DROP TABLE IF EXISTS `t_tag`;  

 CREATE TABLE blog.t_tag (  
	id BIGINT auto_increment NOT NULL,  
	name varchar(255) DEFAULT  NULL,  
	CONSTRAINT t_tag_pk PRIMARY KEY (id)  
)  
ENGINE=InnoDB  
DEFAULT CHARSET=utf8mb4  
COLLATE=utf8mb4_0900_ai_ci;  

 ###  1.4 评论  

DROP TABLE IF EXISTS `t_comment`;  

CREATE TABLE blog.t_comment (  
  `id` bigint NOT null comment '主键',  
  `avatar` varchar(255) DEFAULT null comment '头像',  
  `content` varchar(255) DEFAULT null comment '内容',  
  `create_time` datetime DEFAULT null comment '创建时间',  
  `email` varchar(255) DEFAULT null comment '邮箱',  
  `nickname` varchar(255) DEFAULT null comment '昵称',  
  `blog_id` bigint DEFAULT null comment '所属博客',  
  `parent_comment_id` bigint DEFAULT null comment '所属父评论',  
  PRIMARY KEY (`id`),  
  CONSTRAINT `fk_comment_id` FOREIGN KEY (`parent_comment_id`) REFERENCES `t_comment` (`id`),  
  CONSTRAINT `fk_blog_id` FOREIGN KEY (`blog_id`) REFERENCES `t_blog` (`id`)  
)  
ENGINE=InnoDB  
DEFAULT CHARSET=utf8mb4  
COLLATE=utf8mb4_0900_ai_ci;  
 
 ###  1.5 用户  

DROP TABLE IF EXISTS `t_user`;  
   
 CREATE TABLE blog.t_user (  
 `id` bigint NOT null comment '主键',  
  `avatar` varchar(255) DEFAULT null comment '头像',  
  `create_time` datetime DEFAULT null comment '创建时间',  
  `email` varchar(255) DEFAULT null comment '邮箱',  
  `nickname` varchar(255) DEFAULT null comment '昵称',  
  `password` varchar(255) DEFAULT null comment '密码',  
  `type` int DEFAULT null comment '用户类型',  
  `update_time` datetime DEFAULT null comment '更新时间',  
  `username` varchar(255) DEFAULT null comment '用户名',  
  PRIMARY KEY (`id`)  
)  
ENGINE=InnoDB  
DEFAULT CHARSET=utf8mb4   
COLLATE=utf8mb4_0900_ai_ci;  


 ###  1.6  博客_标签中间表  
DROP TABLE IF EXISTS `t_blog_tags`;  

CREATE TABLE `t_blog_tags` (  
  `blogs_id` bigint NOT NULL,  
  `tags_id` bigint NOT NULL,  
  CONSTRAINT `FK_tag_id` FOREIGN KEY (`tags_id`) REFERENCES `t_tag` (`id`),  
  CONSTRAINT `Fkk_blog_id` FOREIGN KEY (`blogs_id`) REFERENCES `t_blog` (`id`)  
)  
ENGINE=InnoDB  
DEFAULT CHARSET=utf8mb4  
COLLATE=utf8mb4_0900_ai_ci;  



 #### 注意：创建表的时候需根据约束的先后顺序创建，否则会报错.  

## 2. 实体类设计 （由MyBatisX生成即可）  

#### 提交版本  
  <img src="https://user-images.githubusercontent.com/103165360/262345233-9c48d8ca-17d4-49b5-a7cb-d0be86e5680e.png" alt="版本" width="800">  
